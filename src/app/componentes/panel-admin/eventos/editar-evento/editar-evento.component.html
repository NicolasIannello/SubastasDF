<div id="myModal" class="modal" style="overflow: auto;">
    <div class="modal-content" style="width: 50%;">
        <div style="display: flex; justify-content: flex-end; font-size: x-large;">
            <i class="fa-solid fa-xmark icerrar" (click)="cerrarModal()"></i>
        </div>
        <label>Nombre de la publicacion: </label><span class="msg">*{{alertas[0]}}</span>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <input class="effect-1" type="text" placeholder="Nombre de la publicacion" style="height: 2.5rem;"
            [ngClass]="{'changed': eventoNuevo['nombre']!=evento['nombre']}" [(ngModel)]="eventoNuevo['nombre']">
            <span class="focus-border2"></span>
        </div>
        <label>Categoria: </label>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <select class="effect-1" [(ngModel)]="eventoNuevo['categoria']" style="width: 100%; height: 2.5rem;"
            [ngClass]="{'changed': eventoNuevo['categoria']!=evento['categoria']}">
                <option value='Autos y motos'>Autos y motos</option> 
                <option value='Movimiento y transporte'>Movimiento y transporte</option> 
                <option value='Maquinas y equipos'>Maquinas y equipos</option> 
                <option value='Rezagos'>Rezagos</option> 
                <option value='Inmuebles'>Inmuebles</option> 
                <option value='Varios'>Varios</option>
            </select>
            <span class="focus-border2"></span>
        </div>
        <!-- <label>Fecha de inicio: </label><span class="msg">*{{alertas[1]}}</span>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <input class="effect-1" type="date" placeholder="Fecha de inicio" style="height: 2.5rem;"
            [ngClass]="{'changed': eventoNuevo['fecha_inicio']!=evento['fecha_inicio']}" [(ngModel)]="eventoNuevo['fecha_inicio']">
            <span class="focus-border2"></span>
        </div> -->
        <label>Fecha de inicio: </label>
        <div class="border rounded" style="width: 100%; margin-bottom: 2%; margin-top: 2%;">
            <span style="margin: 1.5%; display: block; font-family: Avenir;">
                {{evento['fecha_inicio']}}
            </span>
        </div>
        <label>Hora de inicio: </label>
        <div class="border rounded" style="width: 100%; margin-bottom: 2%; margin-top: 2%;">
            <span style="margin: 1.5%; display: block; font-family: Avenir;">
                {{evento['hora_inicio']}}
            </span>
        </div>
        <label>Fecha de cierre: </label>
        <div class="border rounded" style="width: 100%; margin-bottom: 2%; margin-top: 2%;">
            <span style="margin: 1.5%; display: block; font-family: Avenir;">
                {{evento['fecha_cierre']}}
            </span>
        </div>
        <label>Hora de cierre: </label>
        <div class="border rounded" style="width: 100%; margin-bottom: 2%; margin-top: 2%;">
            <span style="margin: 1.5%; display: block; font-family: Avenir;">
                {{evento['hora_cierre']}}
            </span>
        </div>
        <!-- <label>Hora de inicio: </label>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <input class="effect-1" type="time" placeholder="hora de inicio" style="height: 2.5rem;"
            [ngClass]="{'changed': eventoNuevo['hora_inicio']!=evento['hora_inicio']}" [(ngModel)]="eventoNuevo['hora_inicio']">
            <span class="focus-border2"></span>
        </div>
        <label>Fecha de cierre: </label><span class="msg">*{{alertas[2]}}</span>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <input class="effect-1" type="date" placeholder="Fecha de cierre" style="height: 2.5rem;"
            [ngClass]="{'changed': eventoNuevo['fecha_cierre']!=evento['fecha_cierre']}" [(ngModel)]="eventoNuevo['fecha_cierre']">
            <span class="focus-border2"></span>
        </div>
        <label>Hora de cierre: </label>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <input class="effect-1" type="time" placeholder="hora de cierre" style="height: 2.5rem;"
            [ngClass]="{'changed': eventoNuevo['hora_cierre']!=evento['hora_cierre']}" [(ngModel)]="eventoNuevo['hora_cierre']">
            <span class="focus-border2"></span>
        </div> -->
        <label>Segundos entre cierres: </label>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <input class="effect-1" type="number" placeholder="Segundos entre cierres" style="height: 2.5rem;"
            [ngClass]="{'changed': eventoNuevo['segundos_cierre']!=evento['segundos_cierre']}" [(ngModel)]="eventoNuevo['segundos_cierre']">
            <span class="focus-border2"></span>
        </div>
        <label>Modalidad: </label>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <select class="effect-1" [(ngModel)]="eventoNuevo['modalidad']" 
            [ngClass]="{'changed': eventoNuevo['modalidad']!=evento['modalidad']}" style="width: 100%; height: 2.5rem;">
                <option value='Subasta'>Subasta</option> 
                <option value='Remate'>Licitacion</option> 
            </select>
            <span class="focus-border2"></span>
        </div>
        <label>Grupo: </label>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <select class="effect-1" [(ngModel)]="eventoNuevo['grupo']" 
            [ngClass]="{'changed': eventoNuevo['grupo']!=evento['grupo']}" style="width: 100%; height: 2.5rem;">
                <option value='general' selected>General</option>
                <option value='chocado'>Chocado</option>
                <option value='desarmadero'>Desarmadero</option>
                <option value='otro'>Otro</option>
            </select>
            <span class="focus-border2"></span>
        </div>
        <label>Publicar fecha de cierre: </label>
        <div class="col-3" style="display: flex; flex-direction: column; margin-bottom: 2%;">
            <select class="effect-1" [(ngModel)]="eventoNuevo['publicar_cierre']"
            [ngClass]="{'changed': eventoNuevo['publicar_cierre']!=evento['publicar_cierre']}" style="width: 100%; height: 2.5rem;">
                <option [ngValue]=true>Si</option> 
                <option [ngValue]=false>No</option> 
            </select>
            <span class="focus-border2"></span>
        </div>
        <div class="col-3" style="display: flex; flex-direction: row; margin-bottom: 2%; text-align: center;">
            <i class="fa-solid" [ngClass]="{'fa-circle-check verde':eventoNuevo['inicio_automatico'], 'fa-circle-xmark rojo':!eventoNuevo['inicio_automatico']}" style="font-size: larger; margin-right: 1%; cursor: pointer;" (click)="eventoNuevo['inicio_automatico']=!eventoNuevo['inicio_automatico']"></i> Inicio automatico
        </div>
        <div class="col-3" style="display: flex; flex-direction: row; margin-bottom: 2%; text-align: center;">
            <i class="fa-solid" [ngClass]="{'fa-circle-check verde':eventoNuevo['home'], 'fa-circle-xmark rojo':!eventoNuevo['home']}" style="font-size: larger; margin-right: 1%; cursor: pointer;" (click)="eventoNuevo['home']=!eventoNuevo['home']"></i> Mostrar en Home
        </div>
        <div class="col-3" style="display: flex; flex-direction: row; margin-bottom: 2%; text-align: center;">
            <i class="fa-solid" [ngClass]="{'fa-circle-check verde':eventoNuevo['eventos'], 'fa-circle-xmark rojo':!eventoNuevo['eventos']}" style="font-size: larger; margin-right: 1%; cursor: pointer;" (click)="eventoNuevo['eventos']=!eventoNuevo['eventos']"></i> Mostrar en Eventos
        </div>
        <div class="col-3" style="display: flex; flex-direction: row; margin-bottom: 2%; text-align: center;">
            <i class="fa-solid" [ngClass]="{'fa-circle-check verde':eventoNuevo['mostrar_precio'], 'fa-circle-xmark rojo':!eventoNuevo['mostrar_precio']}" style="font-size: larger; margin-right: 1%; cursor: pointer;" (click)="eventoNuevo['mostrar_precio']=!eventoNuevo['mostrar_precio']"></i> Mostrar precio
        </div>
        <div class="col-3" style="display: flex; flex-direction: row; margin-bottom: 2%; text-align: center;">
            <i class="fa-solid" [ngClass]="{'fa-circle-check verde':eventoNuevo['mostrar_ganadores'], 'fa-circle-xmark rojo':!eventoNuevo['mostrar_ganadores']}" style="font-size: larger; margin-right: 1%; cursor: pointer;" (click)="eventoNuevo['mostrar_ganadores']=!eventoNuevo['mostrar_ganadores']"></i> Mostrar ganadores
        </div>
        <div class="col-3" style="display: flex; flex-direction: row; margin-bottom: 2%; text-align: center;">
            <i class="fa-solid" [ngClass]="{'fa-circle-check verde':eventoNuevo['mostrar_ofertas'], 'fa-circle-xmark rojo':!eventoNuevo['mostrar_ofertas']}" style="font-size: larger; margin-right: 1%; cursor: pointer;" (click)="eventoNuevo['mostrar_ofertas']=!eventoNuevo['mostrar_ofertas']"></i> Mostrar ofertas
        </div>
        <label>Imagen de portada: </label>
        <div style="margin-top: 2%; text-align: center;">
            <img src="{{sources}}" alt="" style="width: 100px;">
        </div>
        <label>Nueva imagen de portada: </label>
        <div style="margin-top: 2%; text-align: center;">
            <img src="{{sources2}}" alt="" style="width: 100px;">
        </div>
        <div style="margin-top: 2%;">
            <input type="file" name="imagen" id="imagen" #imagen accept="image/*," (change)="showImg($event)" style="margin-bottom: 2%;">
        </div>
        <label>Lotes de la publicacion: </label>
        <div style="display: flex; border-bottom: 1px solid rgb(48, 131, 220, 0.2); width: 100%; align-items: center;">
            <div class="celda" style="width: 25%;">Titulo</div>
            <div class="celda" style="width: 25%;">Precio Base</div>
            <div class="celda" style="width: 25%;">Incremento</div>
            <div class="celda" style="width: 25%;">Precio salida</div>
            <div class="celda" style="border-right: none; width: 3rem;"></div>
        </div>
        <div *ngFor="let lote of lotes" class="linea" style="display: flex; border-bottom: 1px solid rgb(48, 131, 220, 0.2); width: 100%; align-items: center;">
            <div class="celda username" style="width: 25%;">{{lote['titulo']}}</div>
            <div class="celda username" style="width: 25%;">{{lote['moneda']}} {{lote['precio_base']}}</div>
            <div class="celda username" style="width: 25%;">{{lote['moneda']}} {{lote['incremento']}}</div>
            <div class="celda username" style="width: 25%;">{{(lote['precio_salida']!='null' && lote['precio_salida']!='') ? lote['moneda']+' '+lote['precio_salida'] : '-'}}</div>
            <div class="celda" style="border-right: none; width: 3rem;">
                <i class="fa-solid fa-trash-can boton2 border rounded ibtn" (click)="eliminar(lote['uuid'],lote['titulo'])" style="height: 2rem;"></i>
            </div>
        </div>
        <div *ngIf="lotes.length==0" class="linea" style="display: flex; border-bottom: 1px solid rgb(48, 131, 220, 0.2); width: 100%; text-align: center;">
            <div class="celda username" style="width: 100%; border-right: none;">No hay lotes asignados</div>
        </div>
        <button class="boton boton2 border" style="width: 100%; margin-bottom: 2%; height: 2rem;" (click)="lotesListaModal()">Agregar lote</button>
        <div style="display: flex; justify-content: flex-end;">
            <button class="border rounded boton boton2 botones" (click)="actualizarEvento()">Actualizar</button>
        </div>
    </div>
</div>

<app-lista-lotes [ngClass]="{ 'oculto':!lotesLista }" (messageEvent)="handleMessage($event)"></app-lista-lotes>